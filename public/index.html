<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Libro de Deudas - Local</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>

<body>
    <div class="container">
        <h1>üìö Libro de Deudas</h1>

        <div id="view-summary" class="view view-visible">
            <input id="search-client" type="text" placeholder="üîç Buscar cliente..."
                style="width:100%; font-size:18px; padding:10px; margin-bottom:12px;" />

            <div class="client-form-container">
                <input id="new-client-name" placeholder="Nombre del cliente" />
                <div class="form-buttons-row">
                    <button id="add-client-btn">
                        <i class="fas fa-user-plus"></i>
                        <span>Agregar cliente</span>
                    </button>
                    <button id="print-summary-btn">
                        <i class="fas fa-print"></i>
                        <span>Imprimir resumen</span>
                    </button>
                </div>
            </div>

            <table id="clients-table">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Deuda total</th>
                        <th>√öltimo pago</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- MODAL DE MOVIMIENTOS (Full screen en m√≥vil) -->
    <div id="view-movements" class="view  view-hidden">
        <button id="back-btn">
            <i class="fas fa-arrow-left"></i>
            <span>Volver a Clientes</span>
        </button>
        <h2 id="mov-cliente-name"></h2>

        <div class="mov-actions">
            <button id="show-sale-form">
                <i class="fas fa-cart-plus"></i>
                <span>Agregar Venta</span>
            </button>
            <button id="show-pay-form">
                <i class="fas fa-money-bill-wave"></i>
                <span>Agregar Pago</span>
            </button>
        </div>

        <div id="forms">
            <form id="sale-form" style="display:none">
                <h3><i class="fas fa-cart-plus"></i> Agregar Venta</h3>
                <label>Producto <input name="producto" required /></label>
                <label>Cantidad <input name="cantidad" type="number" min="0" step="1" value="1" required /></label>
                <label>Precio <input name="precio" type="number" min="0" step="0.01" value="0.00" required /></label>
                <label>Fecha <input id="fecha-venta" name="fecha" type="date" /></label>
                <div class="form-buttons">
                    <button type="submit">
                        <i class="fas fa-check-circle"></i>
                        <span>Guardar Venta</span>
                    </button>
                    <button type="button" id="cancel-sale">
                        <i class="fas fa-times-circle"></i>
                        <span>Cancelar</span>
                    </button>
                </div>
            </form>

            <form id="pay-form" style="display:none">
                <h3><i class="fas fa-money-bill-wave"></i> Agregar Pago</h3>
                <label>Monto <input name="monto" type="number" min="0" step="0.01" value="0.00" required /></label>
                <label>Fecha <input id="fecha-pago" name="fecha" type="date" /></label>
                <div class="form-buttons">
                    <button type="submit">
                        <i class="fas fa-check-circle"></i>
                        <span>Guardar Pago</span>
                    </button>
                    <button type="button" id="cancel-pay">
                        <i class="fas fa-times-circle"></i>
                        <span>Cancelar</span>
                    </button>
                </div>
            </form>

            <form id="pay-form" style="display:none">
                <h3>Agregar Pago</h3>
                <label>Monto <input name="monto" type="number" min="0" step="0.01" value="0.00" required /></label>
                <label>Fecha <input id="fecha-pago" name="fecha" type="date" /></label>
                <button type="submit">Guardar pago</button>
                <button type="button" id="cancel-pay">Cancelar</button>
            </form>
        </div>

        <table id="mov-table">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                    <th>Pago</th>
                    <th>Movimiento</th>
                    <th></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- MODAL CONFIRMACI√ìN ELIMINAR -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-box">
            <h3>‚ö†Ô∏è Confirmar eliminaci√≥n</h3>
            <p id="confirm-text">¬øSeguro que deseas eliminar este elemento?</p>
            <div class="modal-actions">
                <button id="confirm-cancel" class="btn-cancel">Cancelar</button>
                <button id="confirm-ok" class="btn-danger">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- jsPDF + autoTable (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="/client.js"></script>
</body>

</html>